#!/bin/sh

if ! command -v yadm &> /dev/null; then
    echo "Use local yadm at ~/yadm, clean it after install"
    yadm="sh ~/yadm"
else
    yadm=yadm
fi

# init yadm submodule
$yadm submodule update --init --recursive

# sparse checkout to avoid  README.md and LICENSE in HOME
rm -f ~/README.md LICENSE
$yadm gitconfig core.sparseCheckout true
$yadm sparse-checkout set '/*' '!README.md' '!LICENSE'
